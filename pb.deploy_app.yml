---
- name: Validate all
  hosts: all
  gather_facts: no
  tasks:
    - name: Validate Input Data
      run_once: yes
      assert:
        that:
          - app_name is defined
        fail_msg: "Please include all required Parameters"

- name: Deploy Apps
  hosts: "{{ app_name }}"
  tasks:
    - name: Load App Varaibles
      import_role:
        name: load_app_vars

    - name: DEBUG Groups Vars
      debug:
        msg:
          - "sudo_user: {{ sudo_user }}"
          - "db_user: {{ db_user}}"

    - name: DEBUG Groups Vars
      debug:
        msg:
          - "ntp_server: {{ ntp_server }}"
